---
import Letras from "../assets/img/Letras.svg";
import background from "../assets/img/background.jpg";
---

<div class="fixed top-0 w-full h-screen" id="logo-mask">
	<section>
		<picture
			id="hero-key"
			class="h-screen scale-125 block overflow-hidden fixed"
		>
			<div class="flex justify-center items-center">
				<img
					id="logoPrincipal"
					src={Letras.src}
					alt="logo"
					class="fixed transform translate-y-[230px] h-[30%] z-10"
				/>
			</div>

			<img
				id="background"
				src={background.src}
				alt="background"
				fetchpriority="high"
				class="w-screen h-full object-cover"
			/>
		</picture>
	</section>
</div>
<div
	class="fixed flex flex-col items-center justify-between h-screen p-20 py-16 w-full z-10"
>
	<header class="flex justify-between w-full">
		<h1>Logo</h1>

		<div class="relative">
			<button
				class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 z-50 relative"
				id="hamburger"
				aria-label="Toggle menu"
			>
				<div class="hamburger-icon relative w-6 h-5">
					<span
						class="block absolute h-0.5 w-6 bg-current transform transition duration-300 ease-in-out"
						id="line1"></span>
					<span
						class="block absolute h-0.5 w-6 bg-current transform transition duration-300 ease-in-out mt-2"
						id="line2"></span>
					<span
						class="block absolute h-0.5 w-6 bg-current transform transition duration-300 ease-in-out mt-4"
						id="line3"></span>
				</div>
			</button>

			<nav
				class="fixed inset-0 bg-black bg-opacity-90 backdrop-blur-sm z-40 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300"
				id="menu"
			>
				<ul
					class="text-center space-y-8 transform -translate-y-4 transition-transform duration-300"
					id="menu-items"
				>
					<li class="opacity-0">
						<a
							href="/"
							class="text-2xl font-medium text-white hover:text-gray-300 transition-colors duration-200"
							>Inicio</a
						>
					</li>
					<li class="opacity-0">
						<a
							href="/servicios"
							class="text-2xl font-medium text-white hover:text-gray-300 transition-colors duration-200"
							>Servicios</a
						>
					</li>
					<li class="opacity-0">
						<a
							href="/contacto"
							class="text-2xl font-medium text-white hover:text-gray-300 transition-colors duration-200"
							>Contacto</a
						>
					</li>
				</ul>
			</nav>

			<script></script>
		</div>
	</header>
	<section id="footer-text" class="absolute bottom-8 m-auto">
		<span
			class="absolute tracking-[5px] whitespace-nowrap text-center -top-[51px] font-medium text-[25px] text-shadow-[[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000] left-1/2 -translate-x-1/2 text-lg"
		>
			REPARAMOS CON LAS MEJORES HERRAMIENTAS
		</span>
	</section>
</div>
<div
	id="welcome-text"
	class="col-span-2 text-center justify-center fixed -top-40 gap-[100vh] w-full h-screen flex items-center
 text-4xl font-bold opacity-0 transition-opacity"
>
	<h1>¡Hola!</h1>
	<div>
		<h1>REPARACIONES MOVILES</h1>
		<p class="text-uppercase text-xl">Con las mejores herramientas</p>
	</div>
</div>

<div
	id=""
	class="col-span-2 text-center justify-center fixed top-0 gap-[100vh] w-full h-screen flex items-center
 text-4xl font-bold opacity-0 transition-opacity"
>
	<h1>sss!</h1>
	<h1>¡Hosaxla!2</h1>
</div>

<style>
	#logo-mask {
		background: rgb(255, 255, 255);
		mask-image: url("../assets/img/Letras.svg");
		mask-position: center 25%;
		mask-repeat: no-repeat;
		mask-size: clamp(9000vh, 3500%, 0vh);
	}
	#logoPrincipal {
		opacity: 0;
		visibility: hidden;
		transition:
			opacity 0.5s ease,
			visibility 0.5s;
	}
	#logo-mask.ready #logoPrincipal {
		opacity: 1;
		visibility: visible;
	}
</style>

<script>
	// Esperar a que el DOM esté completamente cargado
	document.addEventListener("DOMContentLoaded", function () {
		// Agregar la clase 'ready' al contenedor principal
		const logoMask = document.getElementById("logo-mask");
		if (logoMask) {
			logoMask.classList.add("ready");
		}
	});

	import { gsap } from "gsap";

	import { ScrollTrigger } from "gsap/ScrollTrigger";
	// ScrollSmoother requires ScrollTrigger
	import { ScrollSmoother } from "gsap/ScrollSmoother";

	gsap.registerPlugin(ScrollTrigger, ScrollSmoother);
	const tl = gsap.timeline({
		scrollTrigger: {
			scrub: 1,
		},
	});

	//animacion  menu boton
	document.addEventListener("DOMContentLoaded", () => {
		const hamburger = document.getElementById("hamburger");
		const menu = document.getElementById("menu");
		const menuItems = document.querySelectorAll("#menu-items li");
		let isOpen = false;

		function toggleMenu() {
			isOpen = !isOpen;

			if (isOpen) {
				// Abrir menú
				menu.classList.remove("pointer-events-none");
				document.body.style.overflow = "hidden";

				gsap.to(menu, {
					duration: 0.3,
					opacity: 1,
					ease: "power2.inOut",
				});

				gsap.to("#menu-items", {
					duration: 0.4,
					y: 0,
					ease: "back.out(1.2)",
				});

				// Animar ítems del menú
				gsap.to(menuItems, {
					duration: 0.4,
					opacity: 1,
					y: 0,
					stagger: 0.1,
					ease: "power2.out",
					delay: 0.2,
				});

				// Animación del ícono a X
				gsap.to("#line1", { y: 6, rotate: 45, duration: 0.3 });
				gsap.to("#line2", { opacity: 0, duration: 0.2 });
				gsap.to("#line3", { y: -6, rotate: -45, duration: 0.3 });
			} else {
				// Cerrar menú
				gsap.to(menuItems, {
					duration: 0.2,
					opacity: 0,
					y: 20,
					stagger: -0.1,
					ease: "power2.in",
				});

				gsap.to(menu, {
					duration: 0.3,
					opacity: 0,
					ease: "power2.inOut",
					onComplete: () => {
						menu.classList.add("pointer-events-none");
						document.body.style.overflow = "";
					},
				});

				// Revertir animación del ícono a hamburguesa
				gsap.to(["#line1", "#line3"], {
					y: 0,
					rotate: 0,
					duration: 0.3,
				});
				gsap.to("#line2", { opacity: 1, duration: 0.3 });
			}
		}

		hamburger.addEventListener("click", (e) => {
			e.stopPropagation();
			toggleMenu();
		});

		// Cerrar menú al hacer clic fuera
		document.addEventListener("click", (e) => {
			if (isOpen && !menu.contains(e.target) && e.target !== hamburger) {
				toggleMenu();
			}
		});

		// Cerrar menú con la tecla Escape
		document.addEventListener("keydown", (e) => {
			if (isOpen && e.key === "Escape") {
				toggleMenu();
			}
		});
	});

	///
	//animacion principal
	tl.to("#hero-key", { duration: 1, scale: 1, scrub: 1 });

	tl.to(
		"#background",
		{
			opacity: 0,
		},
		"<",
	);
	tl.to(
		"#logoPrincipal",
		{
			opacity: 0,
		},
		"<",
	);
	tl.to(
		"#footer-text",
		{
			opacity: 0,
		},
		"<",
	);

	tl.to(
		"#logo-mask",
		{
			maskSize: "clamp(20vh, 25%, 30vh)",
			translateY: "-15%",
		},
		0.25,
	);

	tl.to(
		"#welcome-text",
		{
			delay:0.4,
			
			opacity: 1,
		},
		"<",
	);

	tl.to(
		"#welcome-text",
		{
			opacity: 0,
		},
		">-0.1",
	);
	//animacion principal
</script>
